<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">

<link rel="import" href="beer-icons.html">


<dom-module id="beer-rating-card">
  

  <template>

    <style>

      /*.card{
        width: 100%;
        margin: 0 0 20px 0;
      }

       .menu{
         @apply(--layout-vertical);         
      }*/

      .rating-wrapper{
        @apply(--layout-horizontal);
        @apply(--layout-start-justified);
      }

/*
      .menu-items {
         @apply(--layout-vertical);
         margin: 0 0 0 20px;
         min-width: 400px;
      }

      .menu-item {
        @apply(--layout-horizontal);
        @apply(--layout-start-justified);
      }

      .category-title{
        font-size: 1.5em;
        font-weight: 200;
        min-width: 400px;
        color: var(--app-accent-color);
        @apply(--layout-horizontal);
        @apply(--layout-end-justified);
        @apply(--layout-center);
      }*/



      /*.rating-address{
        color: var(--app-primary-color);
        font-size: 1em;
        font-weight: 400;
      }*/

      .rating-number{
        font-size: 1.2em;
        font-weight: 300;
        color: var(--app-secondary-color);
        margin: 2px 0 0 10px
      }


      .rating{
        margin: 10px
      }

      .rating-icon{
        font-size: 1em;
        font-weight: 300;
        color: var(--app-accent-color); 
      }
      


      @media (max-width: 767px) {
     

        h3 {
          margin: 24px 0;
        }

      }

    </style>

    <paper-material class="rating" elevation="0" animated-shadow="false">
        <div class="rating-wrapper">
          <template is="dom-repeat" items="[[_positiveStars(rating)]]" as="rating">
              <iron-icon class="rating-icon" icon="beer-icons:star"></iron-icon>
          </template>

          <template is="dom-if" if="[[_middleRating(rating)]]">
              <iron-icon class="rating-icon" icon="beer-icons:star-half"></iron-icon>
          </template>

          <template is="dom-repeat" items="[[_leftOverStars(rating)]]" as="rating">
              <iron-icon class="rating-icon" icon="beer-icons:star-border"></iron-icon>
          </template>

          <div hidden="[[!rating]]" class="rating-number">[[rating]]</div>
        <div>
    </paper-material>
  </template>


  <script>

  Polymer({

    is: 'beer-rating-card',
  
     _positiveStars: function (rating) {
      var returnArray = []
      var positiveRating = Math.floor(rating);
      
       for(var i=0; i<positiveRating; i++){
         returnArray.push('true');
      }
      
      return returnArray;
    },

  _leftOverStars: function (rating) {
      var returnArray = []
      if(rating >4){
        return [];
      }
      var floor = Math.floor(rating);
      
      var negitiveRating = 4-floor;
      if(rating === floor){
          //add one if there is no half star
          negitiveRating ++
      }
        for(var i=0; i<negitiveRating; i++){
            returnArray.push('true')
      }
      return returnArray;
    },

  _middleRating: function (rating) {
      var remainder = rating % 1;
      return remainder;
    },

    

    
    _test(obj){
      console.log("RATING", obj);
    }

  });

  </script>

</dom-module>
