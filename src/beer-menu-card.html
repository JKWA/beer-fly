<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">


<dom-module id="beer-menu-card">

  <template>

    <style>

      /*.card{
        width: 100%;
        margin: 0 0 20px 0;
      }*/

       .menu{
         @apply(--layout-vertical);         
      }

      .category{
        @apply(--layout-horizontal);
        @apply(--layout-center-justified);
      }


      .menu-items {
         @apply(--layout-vertical);
         margin: 0 0 0 20px;
         min-width: 400px;
      }

      .menu-item {
        @apply(--layout-horizontal);
        @apply(--layout-start-justified);
      }

      .category-title{
        font-size: 1.5em;
        font-weight: 200;
        min-width: 400px;
        color: var(--app-accent-color);
        @apply(--layout-horizontal);
        @apply(--layout-end-justified);
        @apply(--layout-center);
      }



      .menu-title{
        color: var(--app-primary-color);
        font-size: 1em;
        font-weight: 400;
      }

      .menu-price{
        font-size: 1em;
        font-weight: 300;
        color: var(--app-secondary-color);
        margin: 0 0 0 10px
      }
      


      @media (max-width: 767px) {
     

        h3 {
          margin: 24px 0;
        }

      }

    </style>
<div>
  <paper-material elevation="0" animated-shadow="false">
    <div class="menu">

      <template is="dom-repeat" items="[[_toArray(menuCategory)]]" as="menu" sort="_categoryOrder">
         <paper-material class='card' elevation="0" animated-shadow="false">
          <div class="category">
            <div class=" category-title">[[menu.title]]</div>            
            <div class="menu-items">
            <template is="dom-repeat" items="[[_toArray(menu.items)]]" as="menuItem">
              <div class="menu-item">
              <div class="menu-title">[[menuItem.name]]</div>
              <div hidden="[[!menuItem.price]]">
                <div class="menu-price">$[[menuItem.price]]</div> 
              </div>
              </div>
            </template>
            </div>
          </div>
         </paper-material>
      </template>
    </div>
  </paper-material>
</div>
  
      

    
  </template>

  <script>

    Polymer({

      is: 'beer-menu-card',

      properties:{

        category: {
          type: Object
        },

        menuCategory:{
          type: Object
        },
        
        menuItem: {
          type: Object
        },
        
      },

    
       _toArray: function (obj) {
        var returnArray = [];
        if(obj){
          var key = Object.keys(obj);
          
          for (var i=0; i<key.length; i++){
            obj[key[i]].$key = key[i];
            returnArray.push(obj[key[i]]);
          }
        }
        return returnArray;
      },

      _categoryOrder: function(a,b){  
        'use strict';
        if(!a.order)
        return 0;
        if (a.order < b.order)
          return -1;
        if (a.order > b.order)
          return 1;
        return 0;
      },

     
      _test: function (obj){
        console.log(obj);
      }

    });

  </script>

</dom-module>
