<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-list/iron-list.html">
<link rel="import" href="../bower_components/iron-label/iron-label.html">

<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../bower_components/paper-styles/element-styles/paper-material-styles.html">
<link rel="import" href="../bower_components/polymerfire/firebase-query.html">
<link rel="import" href="../bower_components/polymerfire/firebase-document.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">


<link rel="import" href="beer-icons.html">
<link rel="import" href="beer-button.html">
<link rel="import" href="beer-menu-edit-price.html">



<dom-module id="beer-menu-edit-item">

  <template strip-whitespace>
    
    <style include="paper-material-styles">
    .card{
        margin: 10px;
        padding: 10px;
        @apply --paper-material-elevation-1;
      }
    </style>


      <firebase-document
            id="menuItem"
            app-name="beer"
            path="organization/[[orgId]]/menu/[[categoryId]]/item/[[menuId]]"
            data="{{menuItem}}">
      </firebase-document>

         <div elevation="1" class="card">
            
            <paper-input 
                label="Item Name" 
                value="{{menuItem.name}}"
                maxlength=100 >
            </paper-input>

            <paper-textarea 
              label="Description" 
              value="{{menuItem.description}}"
              maxlength=1000 >
            </paper-textarea>


            <beer-menu-edit-price
                org-id="[[orgId]]"
                category-id="[[categoryId]]"
                menu-id="[[menuId]]">
            </beer-menu-edit-price>
                  
          </div>
        </div>  
      
  </div>

  </template>

  <script>

    Polymer({

      is: 'beer-menu-edit-item',

       properties: {

        category: {
          type: Object
        },

        categoryId:{
          type: String
        },

        menuId:{
          type: String
        },

        menuItems:{
          type: Object
        },

        orgId:{
          type: String
        },

        toggle:{
          type: Boolean
        }
       },

      _addMenuItem: function (){
        
        var category = this.category;
        console.log(category);
        var obj = {};

        if(category.category) {obj.category = category.category};
        if(category.title) {obj.categoryTitle = category.title};
        if(category.name) {obj.categoryName = category.name};
        if(category.order) {obj.categoryOrder = category.order};
      
          obj.type = 'menu-item';
          this.$.menu.ref.push(obj);
      },

      _deleteMenuItem:function (e){
        var target = e.currentTarget;
        var key = target.menuItemKey;
         this.$.menu.ref.child(key).remove();
      },

      _sortOrder: function(a,b){  
        if (a.order < b.order)
          return -1;
        if (a.order > b.order)
          return 1;
        return 0;
      },

      _test: function (obj) {
        console.log('ITEMS', obj);
      }

      
    });

  </script>

</dom-module>
