{
  "rules": {
     
    "organization": {
      ".read": "true",
      ".indexOn": ["brewId","domain","locationId","beerLastUpdated", "latitude"],

      "$orgId":{
        "BREWERY": {
             ".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())",
						 ".validate": "newData.isBoolean()"
          },
        "PUB": {
             ".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())",
						 ".validate": "newData.isBoolean()"
          },
        "TRUCK": {
             ".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())",
						 ".validate": "newData.isBoolean()"
          },

        "beerLastUpdated":{
          ".validate": "newData.isNumber()"      
        },
        "brewBeer": {
 					".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())",
          "$orgBeerId": {
            "abv": {
              ".validate": "newData.isNumber()"
            },
            "category": {
              ".validate": "newData.isString() "
            },
            "categoryName": {
              ".validate": "newData.isString()"
            },
            "categoryType": {
              ".validate": "newData.isString()"
            },
            "description": {
              ".validate": "newData.isString() && newData.val().length >= 1 && !newData.val().matches(/shit/i) && !newData.val().matches(/fuck/i)"
            },
            "id": {
              ".validate": "newData.isString()"
            },
            "name": {
              ".validate": "newData.isString() && newData.val().length >= 1 && !newData.val().matches(/shit/i) && !newData.val().matches(/fuck/i)"
            },
            "order": {
              ".validate": "newData.isNumber()"
            },
            "styleId": {
              ".validate": "newData.isNumber()"
            },
            "styleName": {
              ".validate": "newData.isString()"
            }
          }
        },
          "category":{
            ".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())",
            "REVIEW":{
              "display": {
                ".validate": "newData.val() === true"
              }
            },
            "CONTACT":{
              "display": {
                ".validate": "newData.val() === true"
              }
            }
          },
          "crowdSource": {
             ".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())",
						 ".validate": "newData.isBoolean()"
          },
          "description": {
            	".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())",
              ".validate": "newData.isString()"
          },
          "dogFriendly": {
            	".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())",
              ".validate": "newData.isBoolean()"
          },
          "mainImage": {
              ".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())"
          },
          "motto": {
            	".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())",
              ".validate": "newData.isString()"
          },
          "onTap": {
            	".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())"
          },
          "over21": {
            	".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())",
              ".validate": "newData.isBoolean()"
          },
          "patio": {
             ".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())",
             ".validate": "newData.isBoolean()"
          }    
        }
      },
    "breweryDB": {
      ".read": "true",
      ".indexOn": "addedToOrganization"
    },
    "category": {
      ".read": "true"
      },
    "beerStyle": {
      ".read": "true"
      },
    "beer": {
      ".read": "true",
      ".indexOn": ["styleId","category","place_id", "place","stateAndCategory", "beerId"],
        "$beerId": {
      		".write": "auth.email_verified == true"
        }
      },
    "locationDB": {
      ".indexOn": "place_id",
      ".read": "true"
    },
    "newOrg":{
      ".write": "auth.email_verified == true"
    },

    "rating": {
      ".read": "true",
       "$beerId":{
          "$uid":{
          ".write": "$uid==auth.uid"
      	}          
      }
    },
    "favorite": {
      ".read": "true",
        "$orgId":{
          "$uid":{
          ".write": "$uid==auth.uid"
      	}          
      }
    },
    "GeoTap": {
      ".read": "true",
        "$beerId":{
      		".indexOn": "g"
        }
    },
    "GeoFire": {
      ".read": "true",
      ".indexOn": "g"
    },
    "user": {
        "$uid":{
          ".read": "$uid==auth.uid",
          "displayName" :{
              ".write": "$uid==auth.uid"
          },
          "favorite":{
     		  	".write": "$uid==auth.uid"
          },
          "stripe":{
            "organization":{
              "$stripOrgId":{
                "charges":{
                  "$chargeId":{
                    ".write": "$uid==auth.uid",
                   
                     "plan": { ".validate": "newData.val() === 'STANDARD_MONTHLY'" },
                     "token": { ".validate": "newData.isString()" },
                     "delete":{".validate": "newData.isBoolean()"},
                     "$other": { ".validate": false }
                  }
                }
              }
            }
          },
            
          "rating":{
     		  	".write": "$uid==auth.uid"
          }
        }
    },
    "breweryDbBeer": {
      ".read": "true"
    }
  }
}