{
  "rules": {
     
    "organization": {
      ".read": "true",
      ".indexOn": ["brewId","domain","locationId","beerLastUpdated", "latitude"],

      "$orgId":{
				".write": "auth.email_verified == true && root.child('user').child(auth.uid).child('ADMIN').val() == true || root.child('organization').child($orgId).child('domain').val().contains(root.child('user').child(auth.uid).child('domain').val())",
        "beerLastUpdated":{
          ".write": "auth.email_verified == true", 
          ".validate": "newData.isNumber()"      
        },
        "brewBeer": {
 					".write": "auth.email_verified == true", 
          "$orgBeerId": {
            "abv": {
              ".validate": "newData.isNumber()"
            },
            "category": {
              ".validate": "newData.isString() "
            },
            "categoryName": {
              ".validate": "newData.isString()"
            },
            "categoryType": {
              ".validate": "newData.isString()"
            },
            "description": {
              ".validate": "newData.isString() && newData.val().length >= 1 && !newData.val().matches(/shit/i) && !newData.val().matches(/fuck/i)"
            },
            "id": {
              ".validate": "newData.isString()"
            },
            "name": {
              ".validate": "newData.isString() && newData.val().length >= 1 && !newData.val().matches(/shit/i) && !newData.val().matches(/fuck/i)"
            },
            "order": {
              ".validate": "newData.isNumber()"
            },
            "styleId": {
              ".validate": "newData.isNumber()"
            },
            "styleName": {
              ".validate": "newData.isString()"
            }
          }
        },
          "category":{
            "REVIEW":{
              "display": {
                ".validate": "newData.val() === true"
              }
            },
            "CONTACT":{
              "display": {
                ".validate": "newData.val() === true"
              }
            }
          },
          "crowdSource": {
						 ".validate": "newData.isBoolean()"
          },
          "dogFriendly": {
               ".validate": "newData.isBoolean()"
          },
          "mainImage": {
          },
          "motto": {
               ".validate": "newData.isString()"
          },
          "onTap": {
          },
          "over21": {
               ".validate": "newData.isBoolean()"
          },
          "patio": {
             ".validate": "newData.isBoolean()"
          }    
        }
      },
    "breweryDB": {
      ".read": "true",
      ".indexOn": "addedToOrganization"
    },
    "category": {
      ".read": "true"
      },
    "beerStyle": {
      ".read": "true"
      },
    "beer": {
      ".read": "true",
      ".indexOn": ["styleId","category","place_id", "place","stateAndCategory", "beerId"],
        "$beerId": {
      		".write": "auth.email_verified == true"
        }
      },
    "locationDB": {
      ".indexOn": "place_id",
      ".read": "true"
    },
    "newOrg":{
      ".write": "auth.email_verified == true"
    },

    "rating": {
      ".read": "true",
       "$beerId":{
          "$uid":{
          ".write": "$uid==auth.uid"
      	}          
      }
    },
    "favorite": {
      ".read": "true",
        "$orgId":{
          "$uid":{
          ".write": "$uid==auth.uid"
      	}          
      }
    },
    "GeoTap": {
      ".read": "true",
        "$beerId":{
      		".indexOn": "g"
        }
    },
    "GeoFire": {
      ".read": "true",
      ".indexOn": "g"
    },
    "user": {
        "$uid":{
          ".read": "$uid==auth.uid",
          "favorite":{
     		  	".write": "$uid==auth.uid"
          },
          "rating":{
     		  	".write": "$uid==auth.uid"
          }
        }
    },
    "breweryDbBeer": {
      ".read": "true"
    }
  }
}